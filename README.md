# node_homework_2
내일배움캠프 Node.js 숙련주차 개인과제

# 환경변수
~~.env 파일에 어떤 환경변수가 추가되어야 하는지 작성합니다.~~

사용한 환경변수
- SEQUELISE_USERNAME
- SEQUELISE_PASSWORD
- SEQUELISE_DB
- SEQUELISE_HOST

# API 명세서 URL

- 작성 못함.

# ERD URL

- 작성 못함.

# 더 고민해 보기

1. **암호화 방식**
   
~~비밀번호를 DB에 저장할 때 Hash를 이용했는데, Hash는 `단방향 암호화`와 `양방향 암호화` 중 어떤 암호화 방식에 해당할까요?~~
~~비밀번호를 그냥 저장하지 않고 Hash 한 값을 저장 했을 때의 좋은 점은 무엇인가요?~~
- Hash는 단방향 암호화 기법이고 Encryption은 양방향 암호화 기법이다. Hash는 평문을 암호화된 문장으로 만들어주는 기능을 하고, Encryption은 평문을 암호화된 문장(텍스트)로 만들어주는 기능과 함께 암호화된 문장을 다시 평문으로 만드는 복호화 기능도 한다.
  해시는 사용자가 설정한 평문의 비밀번호를 해시함수(해시 알고리즘)을 이용하여 고정된 길이의 암호화된 문자열로 바꿔주는 것을 이용한 암호화 기법이다.
- 해시를 사용하면 평문이 아닌 해시값이 저장되므로 비밀번호가 유출되더라도 사용자 정보를 보호할 수 있고 각 사용자들의 비밀번호를 비교할 수 없음으로 개인정보 보호에도 도움이 된다.
- 그러나 해시값은 항상 고정된 길이의 값으로 나타남으로 한계가 존재한다. 이런 이유로 다른 입력값이라도 같은 해시된 값이 같은 경우가 존재할 수 있다. 또 해시 알고리즘은 모두에게 공개되어 있기에 많은 알고리즘을 실행시켜 취약점을 발견한다면
  보안이 뚫려 개인정보가 유출될 가능성이 존재한다.


2. **인증 방식**
   
~~JWT(Json Web Token)을 이용해 인증 기능을 했는데, 만약 Access Token이 노출되었을 경우 발생할 수 있는 문제점은 무엇일까요?~~
~~해당 문제점을 보완하기 위한 방법으로는 어떤 것이 있을까요?~~
- access token이 노출된다면 서버는 사용자를 구분할 수 없기에 특별한 인증절차 없이도 token 만으로 접근이 가능하게 되어 보안상 문제가 생기게 된다. 또한 토큰은 삭제 등의 기능적 통제가 불가능하여 탈취되었을 경우 보안상 더욱 위험하다.
- 이런 문제점을 해결하기 위해 토큰에 유효기간을 정해주고 Refresh Token을 이용해 복호화를 해준다.
  토큰의 유효기간을 설정할 때에 엑세스 토큰의 유효기간은 짧게, 리프레쉬 토큰의 유효기간은 길게 설정하여 차이를 주고 평소 통신할때는 엑세스 토큰을 사용하고 리프레쉬 토큰은 엑세스 토근의 유효기간이 만료되어 갱신이 필요한 경우에 사용되도록 만들어준다.
  리프레쉬 토큰은 사용자가 엑세스 토큰을 재요청할 때마다 새로 발급받기 때문에 만약 탈취 되더라도 탈취된 토큰은 유효기간이 만료되어 더이상 사용할 수 없게 된다.


4. **인증과 인가**
   
~~인증과 인가가 무엇인지 각각 설명해 주세요.~~
~~과제에서 구현한 Middleware는 인증에 해당하나요? 인가에 해당하나요? 그 이유도 알려주세요.~~
- 인증은 사용자의 신원을 확인하는 과정이다.
  예를 들어 공연을 관림하기 위해서는 공연 티켓이 필요하다. 이 티켓을 올바르게 사용하기 위해서 티켓에 적힌 구매자의 이름과 티켓을 소지한 본인이 같은 사람인지 확인하는 절차가 필요한데 이를 인증이라고 한다. 온라인에서는 로그인 절차가 인증이라고 할 수 있다.
- 인가는 사용자가 어떤 동작을 수행할 수 있는지 확인하는 것, 접근권한을 얻는 일을 말한다.
  공연의 예를 이용하면, 공연 기획사에서는 티켓을 소지한 사람에게 공연장에 입장할 수 있는 권한을 부여하고, 티켓의 소지여부만 확인된다면 사용자가 누구인지는 신경쓰지 않는 것이다.
- 인증과 인가는 한번에 이뤄지는 경우가 많아 개념적으로 혼란이 발생한다. 그러나 둘은 다른 것이고 언제나 인증이 인가로 이어지는 것은 아니다.


4. **Http Status Code**

~~과제를 진행하면서 `사용한 Http Status Code`를 모두 나열하고, 각각이 `의미하는 것`과 `어떤 상황에 사용`했는지 작성해 주세요.~~
- 201
  요청이 성공적으로 수행되었고 새로운 리소스를 생성하였다는 뜻.
  과제에서는 상품의 등록이 정상적으로 수행되었을때 사용.
- 400
  잘못된 문법으로 인하여 서버가 요청을 이해할 수 없다는 뜻.
  과제에서는 입력된 형식이 올바르지 않을때 사용.
- 401
  인증되지 않은 요청이라는 뜻.
  과제에서는 로그인하지 않은 사용자가 기능을 수행하려 시도할때 사용.
- 404
  서버가 요청받은 리소스를 찾을 수 없다는 뜻.
  과제에서는 사용자의 기능 요청에 응답할 수 없을때 사용.
- 500
  웹 사이트에서 응답에 문제가 발생했다는 뜻. 구체적인 이유는 적지 않는다.
  과제에서는 try,catch를 통해 확인되지 않은 오류를 표시할때 사용.


6. **리팩토링**

~~MongoDB, Mongoose를 이용해 구현되었던 코드를 MySQL, Sequelize로 변경하면서, 많은 코드 변경이 있었나요? 주로 어떤 코드에서 변경이 있었나요?~~
~~만약 이렇게 DB를 변경하는 경우가 또 발생했을 때, 코드 변경을 보다 쉽게 하려면 어떻게 코드를 작성하면 좋을 지 생각나는 방식이 있나요? 있다면 작성해 주세요.~~
- 기존의 몽고디비를 이용하기 위해 작성했던 코드를 mySQL로 변경하기 위해서 리팩토링을 하였다.
  구글링을 통해 mySQL에서 사용하는 문법으로 바꿔주는 작업을 수행했고 대부분 API 요청을 수정하였다.  


6. **서버 장애 복구**

~~현재는 PM2를 이용해 Express 서버의 구동이 종료 되었을 때에 Express 서버를 재실행 시켜 장애를 복구하고 있습니다. 만약 단순히 Express 서버가 종료 된 것이 아니라, AWS EC2 인스턴스(VM, 서버 컴퓨터)가 재시작 된다면, Express 서버는 재실행되지 않을 겁니다. AWS EC2 인스턴스가 재시작 된 후에도 자동으로 Express 서버를 실행할 수 있게 하려면 어떤 조치를 취해야 할까요?~~
- MP2의 기능중 하나인 startup 명령어를 히용해 자동시작 하도록 설정이 가능하다.


8. **개발 환경**
- nodemon은 어떤 역할을 하는 패키지이며, 사용했을 때 어떤 점이 달라졌나요?
- npm을 이용해서 패키지를 설치하는 방법은 크게 일반, 글로벌(`--global, -g`), 개발용(`--save-dev, -D`)으로 3가지가 있습니다. 각각의 차이점을 설명하고, nodemon은 어떤 옵션으로 설치해야 될까요?
